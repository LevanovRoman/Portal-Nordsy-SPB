2. Удаление записи из связующей таблицы
Для удаления записи из связующей таблицы просто удалите объект из коллекции. JPA автоматически удалит соответствующую запись из связующей таблицы:

Пример в сервисе:

java
Копировать код
@Transactional
public void removeEntityFromRelation(Long entity1Id, Long entity2Id) {
    Entity1 entity1 = entity1Repository.findById(entity1Id).orElseThrow();
    Entity2 entity2 = entity2Repository.findById(entity2Id).orElseThrow();

    // Удаляем связь
    entity1.getEntities().remove(entity2);
    entity1Repository.save(entity1);
}
При этом:

Запись в связующей таблице (entity1_entity2) будет удалена.
Сами сущности Entity1 и Entity2 останутся в базе данных.
---------------------
4. Удаление вручную с использованием EntityManager
Если требуется дополнительный контроль, можно вручную удалить записи из связующей таблицы:

Пример:

java
Копировать код
@Transactional
public void deleteFromJoinTable(Long entity1Id, Long entity2Id) {
    entityManager.createNativeQuery("DELETE FROM entity1_entity2 WHERE entity1_id = :entity1Id AND entity2_id = :entity2Id")
                 .setParameter("entity1Id", entity1Id)
                 .setParameter("entity2Id", entity2Id)
                 .executeUpdate();
}
